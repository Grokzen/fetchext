# Plan: Network Chaos Testing

## 1. Introduction
Ensure `NetworkClient` handles bad network conditions gracefully.

## 2. Objectives
- Create a test suite simulating network faults.
- Verify retry logic and error reporting.

## 3. Implementation Details

### 3.1. Mocking
- Use `requests-mock` or `pytest-mock`.
- Scenarios:
    - **Timeout**: Request hangs.
    - **503**: Service unavailable (should retry).
    - **429**: Rate limit (should wait and retry).
    - **Partial Content**: Connection drops mid-download.
    - **Garbage Data**: Server returns random bytes instead of CRX.

### 3.2. Assertions
- Verify that `fext` retries the correct number of times.
- Verify that it eventually fails with a clean error message (not a stack trace).
- Verify that partial files are cleaned up.

## 4. Verification
- **Run**: `pytest tests/integration/test_network_chaos.py`.
