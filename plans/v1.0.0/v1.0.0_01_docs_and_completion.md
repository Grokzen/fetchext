# Plan: Man Page & Shell Completion (v1.0.0)

## Goal

Improve CLI usability and packaging by providing standard Linux documentation (man pages) and shell auto-completion scripts.

## Features

1. **Man Page Generation**:
    - Create a script to generate `fext.1` man page from the `argparse` definition.
    - Use `argparse-manpage` library.
2. **Shell Completion**:
    - Create a script to generate completion scripts for Bash, Zsh, and Fish.
    - Use `shtab` library (supports static generation for argparse).

## Implementation Details

### 1. Dependencies

- Add `argparse-manpage` and `shtab` to `requirements-dev.txt`.

### 2. `src/fetchext/cli.py`

- Refactor `main()` to expose the `parser` object so it can be imported by generation scripts.
- Create a `get_parser()` function.

### 3. Generation Scripts

- `scripts/gen_man.py`: Imports parser and uses `argparse_manpage` to write `docs/man/fext.1`.
- `scripts/gen_completion.py`: Imports parser and uses `shtab` to write `docs/completions/fext.{bash,zsh,fish}`.

### 4. Integration

- Add `make docs` target to run these scripts.

## Verification

- Run `make docs`.
- Verify `docs/man/fext.1` exists and looks correct (using `man -l`).
- Verify `docs/completions/` contains scripts.
- Source the completion script and test (if possible in this env, otherwise manual check).
