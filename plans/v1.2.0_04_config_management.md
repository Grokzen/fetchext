# Plan: Config Management (v1.2.0)

## Goal

Implement CLI commands to manage the user configuration file (`~/.config/fext/config.toml`). Users should be able to view and modify settings without manually editing the TOML file.

## Requirements

1. **Commands**:
    * `fext config get <key>`: Retrieve the value of a specific configuration key.
    * `fext config set <key> <value>`: Set the value of a specific configuration key.
    * `fext config list`: List all configuration settings (optional but helpful).
2. **Key Format**: Support dot notation for nested keys (e.g., `general.download_dir`, `batch.workers`).
3. **Type Handling**: Automatically infer types (int, bool, string) or validate against expected types.
4. **Persistence**: Changes must be saved back to `~/.config/fext/config.toml`.

## Implementation Steps

### 1. Core Logic (`src/fetchext/config.py`)

* Add `get_config_value(config, key_path)`: Helper to traverse nested dicts.
* Add `set_config_value(config, key_path, value)`: Helper to set nested values.
* Add `save_config(config)`: Function to write the config dict back to the TOML file.
* Ensure `load_config` returns a mutable dict that we can modify and save.

### 2. CLI Integration (`src/fetchext/cli.py`)

* Add `config` subcommand.
* Sub-subcommands: `get`, `set`, `list`.
* `get <key>`: Print value.
* `set <key> <value>`: Update config and save.
* `list`: Print full config (JSON or TOML format).

### 3. Testing

* Create `tests/unit/test_config_cli.py`.
* Test getting existing keys.
* Test setting new values (int, bool, str).
* Test saving to disk (mocked).
* Test invalid keys.

## Verification

* Run `fext config set batch.workers 8`.
* Run `fext config get batch.workers` -> should output `8`.
* Check `~/.config/fext/config.toml` content.
