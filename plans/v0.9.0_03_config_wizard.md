# Plan: Configuration Wizard (v0.9.0)

## Goal

Implement a `fext setup` command that interactively guides the user through creating or updating the configuration file (`~/.config/fext/config.toml`).

## Requirements

1. **CLI Command**: `fext setup`
    * Should check if config exists.
    * If exists, ask to overwrite or edit.
    * If not, create new.

2. **Interactive Prompts**:
    * **Download Directory**: Default to `.` or current setting.
    * **Max Workers**: Default to 4.
    * **Save Metadata**: Default to False (y/n).
    * **Auto Extract**: Default to False (y/n).
    * **Rate Limit Delay**: Default to 0.0.

3. **Implementation Details**:
    * Use `rich.prompt` for interactive input.
    * Use `tomli_w` (if available) or just standard string formatting for TOML writing (since we don't want to add `tomli-w` dependency if we can avoid it, but `tomli` is read-only).
    * Actually, `fetchext` already has `tomli` for reading (via `config.py` probably). Writing TOML is simple enough for our needs (just key-value pairs in sections).
    * Reuse `fetchext.config` to get the config path.

## Architecture

* **`src/fetchext/setup.py`**:
  * `run_setup()`: Main function to run the wizard.
* **`src/fetchext/cli.py`**:
  * Add `setup` subcommand.

## Testing Strategy

* **Unit**: Test `run_setup` with mocked inputs (using `unittest.mock.patch('rich.prompt.Prompt.ask')`).
* **Integration**: Run `fext setup` in a test environment and verify `config.toml` creation.

## Steps

1. Create `src/fetchext/setup.py`.
2. Implement `run_setup` using `rich.prompt`.
3. Integrate into `cli.py`.
4. Add tests in `tests/unit/test_setup.py`.
5. Update docs.
