# Plan: Network Map Generator

## 1. Introduction
Security auditors need to know what external domains an extension communicates with.

## 2. Objectives
- Add `fext analyze network-map <file>`.
- Static analysis of code to find network calls (`fetch`, `XMLHttpRequest`, `$.ajax`).
- Extract URLs and domains.
- Generate a graph or list.

## 3. Implementation Details

### 3.1. Extraction
- Regex/AST search for:
    - `fetch('https://...'`
    - `open('GET', 'https://...'`
    - `permissions` in manifest (host permissions).
- Extract the domains.

### 3.2. Visualization
- Generate a DOT file (Graphviz) or a simple text report.
- Nodes: Extension Files, External Domains.
- Edges: Calls.

### 3.3. Output
- Print summary to console.
- Option to save as `.dot` or `.png` (if graphviz installed).

## 4. Verification
- **Test**: Extension that fetches `google.com` and `api.example.com`.
- **Assert**: Network map lists these domains.
