# Plan: Dependency Tree Visualization

## 1. Introduction

Understanding the internal structure of an extension (how JS files import each other) is crucial for auditing.

## 2. Objectives

- Add `fext graph --tree <file>`.
- Visualize CommonJS/ESM imports as an ASCII tree.

## 3. Implementation Details

### 3.1. Parsing

- Use the existing `GraphAnalyzer` (from v1.4.0) to build the adjacency list of imports.
- Ensure it supports `require()`, `import ... from`, and `import()`.

### 3.2. Tree Generation

- Use `rich.tree.Tree`.
- Start from `manifest.json` entry points (background scripts, content scripts, popup).
- Recursively build the tree structure.
- Handle cycles (detect and mark as `[cyclic]`).

### 3.3. CLI Output

- Render the `rich` Tree object to the console.

## 4. Verification

- **Test**: Extension with `a.js` importing `b.js`.
- **Assert**: Output shows `a.js` -> `b.js` hierarchy.
