# Plan: Timeline View (v1.4.0)

## Goal

Implement `fext timeline <file>` to visualize file modification times within a CRX/ZIP archive. This helps in forensic analysis to see when files were last modified, potentially identifying backdated files or update patterns.

## Requirements

1. **New Command**: `fext timeline <file_path>`
2. **Input**: Path to a `.crx` or `.zip` file.
3. **Output**: A chronological list of files sorted by modification time.
    - Display Date/Time.
    - Display Filename.
    - (Optional) Group by day or month if the list is long.
    - Use `rich` for formatting (tables or tree).
4. **Core Logic**:
    - Reuse `CrxDecoder` or `zipfile` to read archive headers.
    - Extract `ZipInfo.date_time` for each file.
    - Convert to `datetime` objects.
    - Sort by datetime.
5. **Integration**:
    - Add to `cli.py`.
    - Add logic to `inspector.py` or a new `timeline.py` (or `analysis.py`?). `inspector.py` seems appropriate as it already inspects file contents.

## Implementation Steps

1. **Update `src/fetchext/inspector.py`**:
    - Add `get_timeline(file_path: Path) -> List[Dict]` function.
    - It should open the file (CRX or ZIP), iterate over `infolist()`, and return a sorted list of file metadata (path, datetime, size).
2. **Update `src/fetchext/cli.py`**:
    - Add `timeline` subcommand.
    - Call `inspector.get_timeline`.
    - Render the result using a `rich.table.Table` or a custom timeline view.
3. **Tests**:
    - Unit test for `get_timeline` with a mock ZIP/CRX.
    - Integration test for the CLI command.

## Verification

- Run `fext timeline downloads/test.crx`.
- Verify output is sorted chronologically.
